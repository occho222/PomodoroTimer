# ポモドーロタイマー 現在の仕様書

## 概要
ポモドーロテクニックに基づいたタスク管理とタイマー機能を提供するWPFアプリケーション

## タスク状態とカンバンボード

### タスクの状態
1. **未開始 (Todo)** - 新規作成されたタスク
2. **待機中 (Waiting)** - 作業対象として選択されたタスク
3. **実行中 (Executing)** - 25分セッション中のタスク（同時に1つのみ）
4. **完了 (Completed)** - 完了したタスク

### カンバンボードの構成
- **未開始列**: 作成されたタスクが表示される
- **待機中列**: 作業対象として選択されたタスクが表示される
- **実行中列**: 現在25分セッション中のタスクが表示される（専用列）

## タスク状態遷移

### 1. 未開始 → 待機中
- **操作**: 未開始タスクの「▶開始」ボタンをクリック
- **動作**: 
  - タスク状態が `Waiting` に変更
  - 待機中列に移動
  - タイマーは開始されない

### 2. 待機中 → 実行中
- **操作**: 待機中タスクの「▶25分セッション開始」ボタンをクリック
- **動作**:
  - タスク状態が `Executing` に変更
  - 実行中列に表示
  - 25分タイマーが自動開始
  - 既に実行中のタスクがある場合は自動停止
  - **制限**: 同時に実行中になれるタスクは1つのみ

### 3. 実行中 → 待機中
- **操作**: 実行中タスクの「⏹セッション停止」ボタンをクリック
- **動作**:
  - タスク状態が `Waiting` に戻る
  - 待機中列に戻る
  - タイマー停止

### 4. 任意の状態 → 完了
- **操作**: 各状態のタスクの「✓完了」ボタンをクリック
- **動作**:
  - タスク状態が `Completed` に変更
  - 完了列に移動
  - 完了日時が記録される

## タイマー機能

### セッション種類
1. **作業セッション**: 25分間の集中作業時間
2. **短い休憩**: 5分間の休憩時間
3. **長い休憩**: 15分間の休憩時間（4セッション後）

### タイマー制御
- **開始/一時停止**: スペースキー または 開始/一時停止ボタン
- **停止/リセット**: 停止ボタン
- **自動遷移**: セッション完了時に自動的に次のセッション種類に切り替え

## タスク操作機能

### 基本操作
- **新規作成**: 「タスク追加」ボタン または クイック追加フィールド
- **編集**: 各タスクの「✏編集」ボタン
- **削除**: 各タスクの「🗑削除」ボタン
- **詳細表示**: 各タスクの「📝詳細」ボタン

### 追加機能
- **テンプレート作成**: タスクから「📋テンプレート作成」ボタン
- **タスク一時停止**: 待機中タスクの「⏸一時停止」ボタンで未開始に戻す
- **フィルタリング**: カテゴリ・タグ・優先度による絞り込み

## 問題点と改善提案

### 現在の問題点

1. **状態遷移の複雑さ**
   - 3つの状態（未開始→待機中→実行中）の遷移が直感的でない
   - 「待機中」の意味が曖昧（作業待機中？作業中？）

2. **UI の一貫性の欠如**
   - 実行中タスクは専用列に表示されるが、他の状態は通常のカンバン形式
   - 同じ操作でも表示場所によってボタンの見た目が異なる

3. **25分セッションの制限**
   - 同時に1つしか実行できないため、複数タスクの並行作業ができない
   - 実行中タスクの変更が煩雑

4. **ユーザビリティの問題**
   - 待機中列の意味がユーザーに分かりにくい
   - タスクが実行中列に移動すると元の場所が分からなくなる

### 改善提案

1. **状態を簡素化**
   - 未開始 → 実行中 → 完了 の2段階遷移に簡素化
   - 「待機中」状態を廃止し、25分セッション=作業中とする

2. **カンバンボードの統一**
   - 実行中タスクも通常のカンバン列として表示
   - 実行中列を廃止し、統一されたレイアウトにする

3. **複数タスクセッション対応**
   - 複数タスクで同時に25分セッションを開始可能にする
   - タスクごとに独立したタイマー表示

4. **直感的なワークフロー**
   - 未開始タスクから直接25分セッションを開始可能にする
   - より明確なアクション名（「作業開始」「セッション開始」等）

## データ管理

### 永続化
- JSON形式でローカルファイルに保存
- タスク変更時の自動保存
- アプリケーション起動時のデータ復元

### エクスポート/インポート
- CSV形式でのエクスポート機能
- Microsoft Graph連携（予定）
- タスクテンプレート機能

## 統計機能
- 完了タスク数の記録
- 作業時間の計測
- 日別/週別/月別の統計表示
- 自己分析レポート機能

---

**最終更新**: 2025年7月19日  
**バージョン**: v1.0（現在の実装状況）